# Lighteräº¤æ˜“æ‰€é…ç½®æ–‡ä»¶

exchange_id: "lighter"
exchange_name: "Lighter"

# APIé…ç½®
api_config:
  # APIç«¯ç‚¹
  mainnet_url: "https://mainnet.zklighter.elliot.ai"
  testnet_url: "https://testnet.zklighter.elliot.ai"
  ws_mainnet_url: "wss://mainnet.zklighter.elliot.ai/stream"
  ws_testnet_url: "wss://testnet.zklighter.elliot.ai/stream"
  
  # é»˜è®¤ä½¿ç”¨ä¸»ç½‘
  testnet: false
  
  # APIè®¤è¯é…ç½®
  # æ³¨æ„ï¼šè¿™äº›ä¿¡æ¯éœ€è¦åœ¨å®é™…ä½¿ç”¨æ—¶é…ç½®
  # API_KEY_PRIVATE_KEY: ä»Lighterå‰ç«¯ç”Ÿæˆçš„API Keyç§é’¥ï¼ˆå¸¦0xå‰ç¼€ï¼‰
  # ACCOUNT_INDEX: è´¦æˆ·ç´¢å¼•
  # API_KEY_INDEX: API Keyç´¢å¼•
  auth:
    # ğŸ”¥ æ˜¯å¦å¯ç”¨APIå¯†é’¥å’Œè´¦æˆ·è®¢é˜…
    # å¦‚æœè®¾ç½®ä¸º falseï¼Œå°†åªè®¢é˜…å…¬å…±æ•°æ®ï¼ˆmarket_statså’Œorder_bookï¼‰ï¼Œä¸è®¢é˜…è´¦æˆ·æ•°æ®
    # è®¾ç½®ä¸º true æ—¶ï¼Œéœ€è¦é…ç½®ä¸‹é¢çš„ api_key_private_keyã€account_index å’Œ api_key_index
    enabled: true
    
    # ğŸ“Œ å¯†é’¥å·²è¿ç§»åˆ°ç¯å¢ƒå˜é‡ï¼ˆ.env æ–‡ä»¶ï¼‰ï¼š
    #    LIGHTER_API_KEY_PRIVATE_KEY - API Key ç§é’¥
    #    LIGHTER_ACCOUNT_INDEX - è´¦æˆ·ç´¢å¼•
    #    LIGHTER_API_KEY_INDEX - API Key ç´¢å¼•
    api_key_private_key: ""  # ç•™ç©ºï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡ LIGHTER_API_KEY_PRIVATE_KEY
    account_index: 0         # ç•™ç©ºï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡ LIGHTER_ACCOUNT_INDEX
    api_key_index: 0         # ç•™ç©ºï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡ LIGHTER_API_KEY_INDEX
  
  # SDKå®‰è£…è¯´æ˜
  sdk_install_command: "pip install git+https://github.com/elliottech/lighter-python.git"

# è®¢é˜…æ¨¡å¼é…ç½®
subscription_mode:
  # æ¨¡å¼: "predefined" (é¢„å®šä¹‰ç¬¦å·åˆ—è¡¨) æˆ– "discovery" (è‡ªåŠ¨å‘ç°)
  mode: "predefined"
  
  # é¢„å®šä¹‰æ¨¡å¼é…ç½®
  predefined:
    # è¦è®¢é˜…çš„äº¤æ˜“å¯¹åˆ—è¡¨
    symbols:
      - "BTC-USD"
      - "ETH-USD"
      - "SOL-USD"
    
    # è¦è®¢é˜…çš„æ•°æ®ç±»å‹
    data_types:
      ticker: true       # è®¢é˜…tickeræ•°æ®
      orderbook: true    # è®¢é˜…è®¢å•ç°¿
      trades: true      # è®¢é˜…æˆäº¤æ•°æ®ï¼ˆæŒ‰éœ€å¼€å¯ï¼‰
      user_data: true   # è®¢é˜…ç”¨æˆ·æ•°æ®ï¼ˆéœ€è¦é…ç½®APIå¯†é’¥ï¼‰
  
  # è‡ªåŠ¨å‘ç°æ¨¡å¼é…ç½®
  discovery:
    enabled: false
    # å‘ç°è§„åˆ™
    rules:
      - type: "volume_threshold"
        min_volume_24h: 1000000  # æœ€å°24å°æ—¶æˆäº¤é‡ï¼ˆUSDï¼‰
      - type: "quote_currency"
        currencies: ["USD", "USDT", "USDC"]

# ç¬¦å·æ˜ å°„é…ç½®
# âš ï¸  å·²ç¦ç”¨ï¼šLighter APIè¿”å›çš„ç¬¦å·å°±æ˜¯ BTCUSDã€ETHUSD ç­‰ï¼ˆæ— åˆ†éš”ç¬¦ï¼‰
# ä¸éœ€è¦é¢å¤–æ˜ å°„ï¼Œç›´æ¥ä½¿ç”¨ symbol_converter çš„è¾“å‡º
symbol_mapping: {}

# é€Ÿç‡é™åˆ¶é…ç½®
rate_limits:
  # REST APIé™åˆ¶
  rest:
    ticker:
      max_requests: 100
      time_window: 60  # ç§’
    orderbook:
      max_requests: 100
      time_window: 60
    trading:
      max_requests: 10
      time_window: 60
    account:
      max_requests: 20
      time_window: 60
  
  # WebSocketé™åˆ¶
  websocket:
    max_subscriptions: 100
    max_reconnect_attempts: 10
    reconnect_delay: 5  # ç§’

# WebSocketé…ç½®
websocket:
  # æ˜¯å¦å¯ç”¨WebSocket
  enabled: true
  
  # å¿ƒè·³é…ç½®
  heartbeat:
    enabled: true
    interval: 30  # ç§’
  
  # é‡è¿é…ç½®
  reconnect:
    enabled: true
    max_attempts: 10
    initial_delay: 1   # ç§’
    max_delay: 30      # ç§’
    exponential_backoff: true

# äº¤æ˜“é…ç½®
trading:
  # é»˜è®¤è®¢å•é…ç½®
  default_order:
    time_in_force: "GTT"  # GTT, IOC, POST_ONLY
    order_type: "LIMIT"    # LIMIT, MARKET
  
  # å¸‚ä»·å•é…ç½®
  market_order:
    max_slippage: 0.01  # 1% æœ€å¤§æ»‘ç‚¹
  
  # é™ä»·å•é…ç½®
  limit_order:
    default_time_in_force: "GTT"
    post_only: false

# ä¿è¯é‡‘é…ç½®
margin:
  # é»˜è®¤ä¿è¯é‡‘æ¨¡å¼
  default_mode: "cross"  # cross æˆ– isolated
  
  # é»˜è®¤æ æ†
  default_leverage: 1

# ç²¾åº¦é…ç½®
precision:
  # ä»·æ ¼ç²¾åº¦ï¼ˆå°æ•°ä½æ•°ï¼‰
  price: 8
  
  # æ•°é‡ç²¾åº¦ï¼ˆå°æ•°ä½æ•°ï¼‰
  quantity: 8
  
  # é‡‘é¢ç²¾åº¦
  amount: 8

# ç¼“å­˜é…ç½®
cache:
  # å¸‚åœºä¿¡æ¯ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
  market_info_ttl: 3600
  
  # è®¢å•ç°¿ç¼“å­˜æ—¶é—´
  orderbook_ttl: 5
  
  # tickerç¼“å­˜æ—¶é—´
  ticker_ttl: 1

# æ—¥å¿—é…ç½®
logging:
  # æ—¥å¿—çº§åˆ«
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  
  # æ˜¯å¦å¯ç”¨è¯¦ç»†æ—¥å¿—
  verbose: false
  
  # æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰
  log_file: "logs/lighter_adapter.log"

# åŠŸèƒ½å¼€å…³
features:
  # æ˜¯å¦æ”¯æŒWebSocket
  websocket_enabled: true
  
  # æ˜¯å¦æ”¯æŒç”¨æˆ·æ•°æ®æµ
  user_data_stream: true
  
  # æ˜¯å¦æ”¯æŒæ æ†äº¤æ˜“
  leverage_trading: true
  
  # æ˜¯å¦æ”¯æŒä¿è¯é‡‘æ¨¡å¼åˆ‡æ¢
  margin_mode_switch: true
  
  # æ˜¯å¦æ”¯æŒæ­¢æŸæ­¢ç›ˆè®¢å•
  stop_orders: true

# ç›‘æ§é…ç½®
monitoring:
  # å¥åº·æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
  health_check_interval: 60
  
  # è¿æ¥è¶…æ—¶ï¼ˆç§’ï¼‰
  connection_timeout: 30
  
  # è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰
  request_timeout: 10

# ä½¿ç”¨è¯´æ˜
usage:
  setup_steps:
    - "1. è®¿é—® https://app.lighter.xyz æ³¨å†Œè´¦æˆ·"
    - "2. åœ¨å‰ç«¯åˆ›å»ºAPI Keyï¼Œä¿å­˜Private Key"
    - "3. å®‰è£…Lighter SDK: pip install git+https://github.com/elliottech/lighter-python.git"
    - "4. é…ç½®æœ¬æ–‡ä»¶ä¸­çš„api_key_private_keyã€account_indexå’Œapi_key_index"
    - "5. åœ¨ç¨‹åºä¸­ä½¿ç”¨LighterAdapter"
  
  important_notes:
    - "Lighterä½¿ç”¨zkRollupæŠ€æœ¯ï¼Œäº¤æ˜“éœ€è¦ç­¾å"
    - "API Keyç§é’¥å¿…é¡»ä¿å¯†ï¼Œä¸è¦æäº¤åˆ°ä»£ç ä»“åº“"
    - "æµ‹è¯•æ—¶å»ºè®®å…ˆä½¿ç”¨testnet: true"
    - "å¸‚åœºç´¢å¼•(market_index)å¯¹åº”äº¤æ˜“å¯¹ï¼Œéœ€è¦é€šè¿‡APIè·å–"

# ç¤ºä¾‹é…ç½®
examples:
  # åŸºæœ¬é…ç½®ç¤ºä¾‹
  basic:
    testnet: false
    auth:
      api_key_private_key: "0x..."
      account_index: 1
      api_key_index: 0
  
  # æµ‹è¯•ç½‘é…ç½®ç¤ºä¾‹
  testnet:
    testnet: true
    auth:
      api_key_private_key: "0x..."
      account_index: 65
      api_key_index: 1
