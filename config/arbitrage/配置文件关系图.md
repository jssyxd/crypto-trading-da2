# å¥—åˆ©ç³»ç»Ÿé…ç½®æ–‡ä»¶å…³ç³»å›¾

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      main_unified.py                        â”‚
â”‚                    (ä¸»å¯åŠ¨è„šæœ¬)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚
        â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ --config         â”‚    â”‚ --monitor-config â”‚
â”‚ (äº¤æ˜“å‚æ•°é…ç½®)    â”‚    â”‚ (ç›‘æ§é…ç½®)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚arbitrage_segmented  â”‚  â”‚   monitor_v2.yaml   â”‚
â”‚     .yaml           â”‚  â”‚  (æˆ–å…¶ä»–monitoré…ç½®)  â”‚
â”‚                     â”‚  â”‚                     â”‚
â”‚ â€¢ äº¤æ˜“å‚æ•°          â”‚  â”‚ â€¢ äº¤æ˜“æ‰€åˆ—è¡¨         â”‚
â”‚ â€¢ ä¸‹å•æ•°é‡          â”‚  â”‚ â€¢ äº¤æ˜“å¯¹åˆ—è¡¨         â”‚
â”‚ â€¢ é£æ§è§„åˆ™          â”‚  â”‚ â€¢ WebSocketé…ç½®     â”‚
â”‚ â€¢ ç½‘æ ¼é…ç½®          â”‚  â”‚ â€¢ æ€§èƒ½å‚æ•°          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ (è‡ªåŠ¨è¯»å–)
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚multi_exchange_   â”‚  â”‚multi_leg_pairs   â”‚
â”‚arbitrage.yaml    â”‚  â”‚    .yaml         â”‚
â”‚                  â”‚  â”‚                  â”‚
â”‚ 1å¯¹å¤š/å¤šå¯¹å¤šè§„åˆ™  â”‚  â”‚  å¤šè…¿å¥—åˆ©è§„åˆ™     â”‚
â”‚                  â”‚  â”‚                  â”‚
â”‚ enabled: true    â”‚  â”‚ enabled: true    â”‚
â”‚ â†“ ç”Ÿæˆå¥—åˆ©å¯¹     â”‚  â”‚ â†“ ç”Ÿæˆå¥—åˆ©å¯¹     â”‚
â”‚ EDGEX_LIGHTER_BTCâ”‚  â”‚ LIGHTER_PAXG_XAU â”‚
â”‚ BACKPACK_...     â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š é…ç½®æ–‡ä»¶ä¾èµ–å…³ç³»

### æ ¸å¿ƒé…ç½®ï¼ˆå¿…é¡»ï¼‰

```
arbitrage_segmented.yaml (ä¸»é…ç½®)
    â”‚
    â”œâ”€â–º system_mode.monitor_only        (æ˜¯å¦å®ç›˜)
    â”œâ”€â–º default_config                  (å…¨å±€é»˜è®¤å€¼)
    â””â”€â–º symbol_configs                  (ç‰¹å®šäº¤æ˜“å¯¹é…ç½®)
            â”‚
            â”œâ”€â–º grid_config             (ç½‘æ ¼å‚æ•°)
            â”œâ”€â–º quantity_config         (æ•°é‡é…ç½®)
            â””â”€â–º risk_config             (é£æ§é…ç½®)
```

### å¥—åˆ©è§„åˆ™ï¼ˆå¯é€‰ï¼Œè‡ªåŠ¨è¯»å–ï¼‰

```
multi_exchange_arbitrage.yaml (1å¯¹å¤š/å¤šå¯¹å¤š)
    â”‚
    â”œâ”€â–º enabled: true/false
    â”œâ”€â–º mode: "one_to_many" / "many_to_many"
    â”œâ”€â–º center_exchange                 (ä¸­å¿ƒäº¤æ˜“æ‰€)
    â”œâ”€â–º counter_exchanges               (å¯¹æ‰‹äº¤æ˜“æ‰€åˆ—è¡¨)
    â””â”€â–º symbols                         (å¸ç§åˆ—è¡¨)
            â”‚
            â””â”€â–º è‡ªåŠ¨ç”Ÿæˆå¥—åˆ©å¯¹
                â”œâ”€â–º EDGEX_LIGHTER_BTC
                â”œâ”€â–º BACKPACK_LIGHTER_BTC
                â””â”€â–º LIGHTER_PARADEX_BTC

multi_leg_pairs.yaml (å¤šè…¿å¥—åˆ©)
    â”‚
    â”œâ”€â–º enabled: true/false
    â””â”€â–º pairs                           (å¥—åˆ©å¯¹åˆ—è¡¨)
            â”‚
            â””â”€â–º pair_id: "LIGHTER_PAXG_XAU"
                â”œâ”€â–º exchange: "lighter"
                â””â”€â–º legs                (è…¿é…ç½®)
                    â”œâ”€â–º PAXG-USD-PERP (buy)
                    â””â”€â–º XAU-USD-PERP (sell)
```

### ç›‘æ§é…ç½®ï¼ˆå¿…é¡»ï¼‰

```
monitor_v2.yaml (é€šç”¨ç›‘æ§)
    â”‚
    â”œâ”€â–º exchanges                       (äº¤æ˜“æ‰€åˆ—è¡¨)
    â”‚   â”œâ”€â–º edgex
    â”‚   â”œâ”€â–º backpack
    â”‚   â”œâ”€â–º lighter
    â”‚   â””â”€â–º paradex
    â”‚
    â”œâ”€â–º symbols                         (äº¤æ˜“å¯¹åˆ—è¡¨)
    â”‚   â”œâ”€â–º BTC-USDC-PERP
    â”‚   â””â”€â–º ETH-USDC-PERP
    â”‚
    â”œâ”€â–º websocket                       (WebSocketé…ç½®)
    â””â”€â–º performance                     (æ€§èƒ½é…ç½®)

monitor_paradex_lighter_btc.yaml (åœºæ™¯ä¸“ç”¨)
    â”‚
    â”œâ”€â–º exchanges: [lighter, paradex]
    â””â”€â–º symbols: [BTC-USDC-PERP]
```

---

## ğŸ”„ é…ç½®åŠ è½½æµç¨‹

```
1. å¯åŠ¨ main_unified.py
   â”‚
   â”œâ”€â–º è¯»å– --config å‚æ•°
   â”‚   â””â”€â–º åŠ è½½ arbitrage_segmented.yaml
   â”‚       â”œâ”€â–º è¯»å– system_mode
   â”‚       â”œâ”€â–º è¯»å– default_config
   â”‚       â””â”€â–º è¯»å– symbol_configs
   â”‚
   â”œâ”€â–º è¯»å– --monitor-config å‚æ•°
   â”‚   â””â”€â–º åŠ è½½ monitor_v2.yaml (æˆ–å…¶ä»–)
   â”‚       â”œâ”€â–º è¯»å– exchanges
   â”‚       â”œâ”€â–º è¯»å– symbols
   â”‚       â””â”€â–º è¯»å– websocket/performance
   â”‚
   â”œâ”€â–º è‡ªåŠ¨è¯»å– multi_exchange_arbitrage.yaml
   â”‚   â””â”€â–º å¦‚æœ enabled: true
   â”‚       â””â”€â–º ç”Ÿæˆå¥—åˆ©å¯¹åˆ—è¡¨
   â”‚
   â”œâ”€â–º è‡ªåŠ¨è¯»å– multi_leg_pairs.yaml
   â”‚   â””â”€â–º å¦‚æœ enabled: true
   â”‚       â””â”€â–º ç”Ÿæˆå¤šè…¿å¥—åˆ©å¯¹åˆ—è¡¨
   â”‚
   â””â”€â–º åˆå§‹åŒ–ç³»ç»Ÿ
       â”œâ”€â–º è¿æ¥äº¤æ˜“æ‰€
       â”œâ”€â–º è®¢é˜…è¡Œæƒ…
       â””â”€â–º å¼€å§‹ç›‘æ§/æ‰§è¡Œ
```

---

## ğŸ¯ ä¸‰ç§æ¨¡å¼çš„é…ç½®ç»„åˆ

### æ¨¡å¼ 1ï¼š1å¯¹å¤šå¥—åˆ©

```
å¿…é¡»é…ç½®ï¼š
â”œâ”€â–º arbitrage_segmented.yaml
â”‚   â””â”€â–º symbol_configs["BTC-USDC-PERP"]
â”œâ”€â–º monitor_v2.yaml
â”‚   â”œâ”€â–º exchanges: [edgex, backpack, lighter, paradex]
â”‚   â””â”€â–º symbols: [BTC-USDC-PERP]
â””â”€â–º multi_exchange_arbitrage.yaml
    â”œâ”€â–º enabled: true
    â”œâ”€â–º mode: "one_to_many"
    â”œâ”€â–º center_exchange: "lighter"
    â”œâ”€â–º counter_exchanges: [edgex, backpack, paradex]
    â””â”€â–º symbols: [BTC-USDC-PERP]

è¿è¡Œå‘½ä»¤ï¼š
python main_unified.py \
  --config config/arbitrage/arbitrage_segmented.yaml \
  --monitor-config config/arbitrage/monitor_v2.yaml
```

### æ¨¡å¼ 2ï¼š1å¯¹1å¥—åˆ©

```
å¿…é¡»é…ç½®ï¼š
â”œâ”€â–º arbitrage_segmented.yaml
â”‚   â””â”€â–º symbol_configs["BTC-USDC-PERP"]
â”œâ”€â–º monitor_paradex_lighter_btc.yaml
â”‚   â”œâ”€â–º exchanges: [lighter, paradex]
â”‚   â””â”€â–º symbols: [BTC-USDC-PERP]
â””â”€â–º multi_exchange_arbitrage.yaml
    â””â”€â–º enabled: false  (å…³é—­)

è¿è¡Œå‘½ä»¤ï¼š
python main_unified.py \
  --config config/arbitrage/arbitrage_segmented.yaml \
  --monitor-config config/arbitrage/monitor_paradex_lighter_btc.yaml
```

### æ¨¡å¼ 3ï¼šå¤šè…¿å¥—åˆ©

```
å¿…é¡»é…ç½®ï¼š
â”œâ”€â–º arbitrage_segmented.yaml
â”‚   â””â”€â–º symbol_configs["LIGHTER_PAXG_XAU"]
â”œâ”€â–º monitor_lighter_gold.yaml
â”‚   â”œâ”€â–º exchanges: [lighter]
â”‚   â””â”€â–º symbols: []  (é€šè¿‡ extra_symbols.yaml è®¢é˜…)
â””â”€â–º multi_leg_pairs.yaml
    â”œâ”€â–º enabled: true
    â””â”€â–º pairs:
        â””â”€â–º LIGHTER_PAXG_XAU
            â”œâ”€â–º PAXG-USD-PERP (buy)
            â””â”€â–º XAU-USD-PERP (sell)

è¿è¡Œå‘½ä»¤ï¼š
python main_unified.py \
  --config config/arbitrage/arbitrage_segmented.yaml \
  --monitor-config config/arbitrage/monitor_lighter_gold.yaml
```

---

## ğŸ” é…ç½®ä¼˜å…ˆçº§

å½“åŒä¸€å‚æ•°åœ¨å¤šä¸ªåœ°æ–¹å®šä¹‰æ—¶ï¼š

```
ä¼˜å…ˆçº§ï¼ˆé«˜ â†’ ä½ï¼‰ï¼š
1. symbol_configs["BTC-USDC-PERP"]  (ç‰¹å®šäº¤æ˜“å¯¹é…ç½®)
   â†“
2. default_config                    (å…¨å±€é»˜è®¤é…ç½®)
   â†“
3. ç³»ç»Ÿå†…ç½®é»˜è®¤å€¼                     (ä»£ç ä¸­çš„é»˜è®¤å€¼)
```

**ç¤ºä¾‹**ï¼š

```yaml
# arbitrage_segmented.yaml

default_config:
  grid_config:
    initial_spread_threshold: 0.05    # å…¨å±€é»˜è®¤ï¼š0.05%

symbol_configs:
  "BTC-USDC-PERP":
    grid_config:
      initial_spread_threshold: 0.1   # BTCä¸“ç”¨ï¼š0.1%
  
  "ETH-USDC-PERP":
    # æœªé…ç½®ï¼Œä½¿ç”¨å…¨å±€é»˜è®¤ 0.05%
```

**ç»“æœ**ï¼š
- BTC ä½¿ç”¨ 0.1%ï¼ˆç‰¹å®šé…ç½®ï¼‰
- ETH ä½¿ç”¨ 0.05%ï¼ˆå…¨å±€é»˜è®¤ï¼‰

---

## ğŸ“ é…ç½®æ£€æŸ¥æ¸…å•

è¿è¡Œå‰ç¡®è®¤ï¼š

```
â–¡ arbitrage_segmented.yaml
  â–¡ monitor_only è®¾ç½®æ­£ç¡®
  â–¡ symbol_configs å·²é…ç½®
  â–¡ æ•°é‡ç¬¦åˆç²¾åº¦è¦æ±‚
  â–¡ é£æ§å‚æ•°åˆç†

â–¡ monitor é…ç½®
  â–¡ exchanges åŒ…å«æ‰€éœ€äº¤æ˜“æ‰€
  â–¡ symbols åŒ…å«æ‰€éœ€å¸ç§

â–¡ å¥—åˆ©è§„åˆ™ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
  â–¡ multi_exchange_arbitrage.yaml
    â–¡ enabled: true
    â–¡ center_exchange æ­£ç¡®
    â–¡ counter_exchanges æ­£ç¡®
  â–¡ multi_leg_pairs.yaml
    â–¡ enabled: true
    â–¡ pair_id æ­£ç¡®
    â–¡ legs é…ç½®æ­£ç¡®

â–¡ ç¯å¢ƒé…ç½®
  â–¡ .env æ–‡ä»¶å·²é…ç½® API å¯†é’¥
  â–¡ ç½‘ç»œè¿æ¥æ­£å¸¸
```

---

## ğŸ†˜ æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šé…ç½®æ²¡ç”Ÿæ•ˆ

**æ£€æŸ¥é¡ºåº**ï¼š
1. YAML è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼ˆç¼©è¿›ã€å†’å·ï¼‰
2. `enabled` å­—æ®µæ˜¯å¦ä¸º `true`
3. æ˜¯å¦é‡å¯äº†è„šæœ¬
4. æŸ¥çœ‹æ—¥å¿—ä¸­çš„åŠ è½½ä¿¡æ¯

### é—®é¢˜ï¼šæ‰¾ä¸åˆ°å¥—åˆ©å¯¹

**å¯èƒ½åŸå› **ï¼š
1. `multi_exchange_arbitrage.yaml` ä¸­ `enabled: false`
2. `monitor` é…ç½®ä¸­ç¼ºå°‘å¯¹åº”çš„äº¤æ˜“æ‰€æˆ–å¸ç§
3. äº¤æ˜“æ‰€è¿æ¥å¤±è´¥

### é—®é¢˜ï¼šä¸çŸ¥é“è¯¥æ”¹å“ªä¸ªæ–‡ä»¶

**å†³ç­–æ ‘**ï¼š
```
æˆ‘æƒ³æ”¹ä»€ä¹ˆï¼Ÿ
â”œâ”€â–º ä¸‹å•æ•°é‡/è§¦å‘ä»·å·®/é£æ§
â”‚   â””â”€â–º arbitrage_segmented.yaml
â”œâ”€â–º å¯ç”¨1å¯¹å¤šå¥—åˆ©
â”‚   â””â”€â–º multi_exchange_arbitrage.yaml
â”œâ”€â–º å¯ç”¨å¤šè…¿å¥—åˆ©
â”‚   â””â”€â–º multi_leg_pairs.yaml
â”œâ”€â–º ç›‘æ§çš„äº¤æ˜“æ‰€/å¸ç§
â”‚   â””â”€â–º monitor_v2.yaml (æˆ–åœºæ™¯ä¸“ç”¨é…ç½®)
â””â”€â–º å®ç›˜/ç›‘æ§æ¨¡å¼åˆ‡æ¢
    â””â”€â–º arbitrage_segmented.yaml (system_mode.monitor_only)
```

